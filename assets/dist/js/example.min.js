console.log("example.js loaded");var splitted_uri,selectedDate=[],month="",year="";function getTimesheetCalendarData(e,t){var a=new Ajax;a.type="POST",a.url=SITE_URL+ROUTER_DIRECTORY+"timesheet/timesheet_stats",a.beforeSend=function(){showAjaxLoader()},a.data={via:"ajax",month:e,year:t};var s=a.init();s.done(function(e){hideAjaxLoader(),console.log(e),$.each(e.data.data_rows,function(e,t){var a=t.timesheet_date,s=new Date(a).getTime().toString();$("#timesheet_calendar").find('td.day[data-date="'+s+'"]').addClass("green")})}),s.fail(function(e){console.log(e),hideAjaxLoader(),alert("We encountered a problem while processing your request.")}),s.always(function(){})}function get_timesheet_stat(){$.each([{id:"1",timesheet_date:"2020-07-17",timesheet_year:"2020",timesheet_month:"10",timesheet_day:"03",timesheet_hours:"7.00",timesheet_review_status:"pending"},{id:"2",timesheet_date:"2020-07-19",timesheet_year:"2020",timesheet_month:"10",timesheet_day:"19",timesheet_hours:"6.00",timesheet_review_status:"pending"},{id:"2",timesheet_date:"2020-07-20",timesheet_year:"2020",timesheet_month:"10",timesheet_day:"20",timesheet_hours:"9.00",timesheet_review_status:"pending"}],function(e,t){$(".day").each(function(){var e=$(this).text();t.timesheet_day=Number(t.timesheet_day).toString(),e==t.timesheet_day&&$(this).addClass("filled")})})}$(function(){var e=$('input[name="selected_date"]').val();if(e){var t=e.split(",");selectedDate=t,$("#display_selected_date").html(selectedDate.join()),0<t.length&&$.each(t,function(e,t){$(".day").each(function(){$(this).text()==t&&$(this).addClass("selected")})})}if(null!=(splitted_uri=window.location.href.split("example/calendar_lib/"))[1]){var a=splitted_uri[1].split("/");a&&(month=a[1],year=a[0])}console.log(month,year),get_timesheet_stat();var s=$("#timesheet_calendar");s.datepicker({format:s.data("format"),todayBtn:"linked",changeMonth:!0,endDate:"today",clearBtn:!0,multidate:!0,daysOfWeekDisabled:"0",daysOfWeekHighlighted:"0",calendarWeeks:!1,todayHighlight:!0,toggleActive:!0});var n=$("input[name='selected_date']").val();0<n.length&&(n=n.split(","),s.datepicker("setDate",n)),s.on("show",function(e){console.log("dpOnShow called");var t=new Date(e.date).getMonth()+1,a=new Date(e.date).getFullYear();console.log("Month",t,a)}),s.on("changeDate",function(e){var t=s.datepicker("getFormattedDate");$("#selected_dates").empty().html(t),$("input[name='selected_date']").val(t)}),s.on("changeMonth",function(e){console.log("dpChangeMonth called");var t=new Date(e.date).getMonth()+1,a=new Date(e.date).getFullYear();console.log("Month",t,a),getTimesheetCalendarData(t,a)}),getTimesheetCalendarData((new Date).getMonth()+1,(new Date).getFullYear())}),$(".allowed_m .day").on("click",function(e){var t=$(this).text();0<t.trim().length&&($(this).hasClass("selected")?($(this).removeClass("selected"),selectedDate.splice($.inArray(t,selectedDate),1)):($(this).addClass("selected"),selectedDate.push(t))),$("#display_selected_date").html(selectedDate.join()),$('input[name="selected_date"]').val(selectedDate.join())}),$("#clear_selected_days").on("click",function(e){e.preventDefault(),selectedDate=[],$('input[name="selected_date"]').val(""),$(".day").removeClass("selected")});