function domReady(){"manage"==ROUTER_METHOD&&renderDataTable(),$(".dob-datepicker, .job-exp-datepicker").datepicker({format:"dd-mm-yyyy",weekStart:1,autoclose:!0}),$("#academic_degree").select2({}).on("select2:close",function(){add_new_item1("degree",$(this))}),$("#academic_specialization").select2({}).on("select2:close",function(){add_new_item2("specialization",$(this))}),$("#academic_institute").select2({}).on("select2:close",function(){add_new_item3("institute",$(this))}),$("#prev_company_id").select2({}).on("select2:close",function(){add_new_item4("prev_company",$(this))}),$("#prev_designation_id").select2({}).on("select2:close",function(){add_new_item5("prev_designation",$(this))}),ROUTER_METHOD}function add_new_item(e,a){console.log(e),console.log(a)}var table;function renderDataTable(){table=$("#user-datatable").DataTable({processing:!0,serverSide:!0,pageLength:25,order:[],ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/render_datatable"},columnDefs:[{targets:[-1],orderable:!1}]})}function changeAccountStatus(e){e.preventDefault();var a=$(this),t=a.attr("data-status"),n=a.attr("data-id"),i=new Ajax;i.type="POST",i.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/change_account_status",i.data={active:t,user_id:n},i.beforeSend=function(){showAjaxLoader()};var d=i.init();d.done(function(e){"success"==e.status&&(hideAjaxLoader(),"Y"==a.attr("data-status")?(a.attr("data-status","N"),a.html("Deactivate"),a.removeClass("btn-outline-success").addClass("btn-outline-danger"),$('.account-status[data-user-id="'+n+'"]').removeClass("badge-danger").addClass("badge-success").text("Active Account")):"N"==a.attr("data-status")&&(a.attr("data-status","Y"),a.html("Activate"),a.removeClass("btn-outline-danger").addClass("btn-outline-success"),$('.account-status[data-user-id="'+n+'"]').removeClass("badge-success").addClass("badge-danger").text("Inactive Account")))}),d.fail(function(){alert("Failed")}),d.always(function(){})}function add_new_item1(e,t){if("-1"==t.val()){var n=$("#addDegree"),i=$("#new_degree_name"),d=$("#responseMessage_addDegree"),a=$("#btnAddDegree");d.html(""),i.val(""),n.modal("show"),a.on("click",function(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/add_user_input_degree",e.data={degree_name:i.val(),action:"add"},e.beforeSend=function(){showAjaxLoader()};var a=e.init();a.done(function(e){hideAjaxLoader(),e.msg&&d.html(e.msg),e.insert_id&&(t.append($("<option>",{value:e.insert_id,text:i.val()})),$("#academic_degree option[value="+e.insert_id+"]").attr("selected","selected"),n.modal("hide"))}),a.fail(function(){alert("Sorry, Can not process your request.")}),a.always(function(){})})}}function add_new_item2(e,t){if("-1"==t.val()){var n=$("#addSpecialization"),i=$("#new_specialization_name"),d=$("#responseMessage_addSpecialization"),a=$("#btnAddSpecialization");d.html(""),i.val(""),n.modal("show"),a.on("click",function(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/add_user_input_specialization",e.data={specialization_name:i.val(),action:"add"},e.beforeSend=function(){showAjaxLoader()};var a=e.init();a.done(function(e){hideAjaxLoader(),e.msg&&d.html(e.msg),e.insert_id&&(t.append($("<option>",{value:e.insert_id,text:i.val()})),$("#academic_specialization option[value="+e.insert_id+"]").attr("selected","selected"),n.modal("hide"))}),a.fail(function(){alert("Sorry, Can not process your request.")}),a.always(function(){})})}}function add_new_item3(e,t){if("-1"==t.val()){var n=$("#addInst"),i=$("#new_inst_name"),d=$("#responseMessage_addInst"),a=$("#btnAddInst");d.html(""),i.val(""),n.modal("show"),a.on("click",function(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/add_user_input_institute",e.data={institute_name:i.val(),action:"add"},e.beforeSend=function(){showAjaxLoader()};var a=e.init();a.done(function(e){hideAjaxLoader(),e.msg&&d.html(e.msg),e.insert_id&&(t.append($("<option>",{value:e.insert_id,text:i.val()})),$("#academic_institute option[value="+e.insert_id+"]").attr("selected","selected"),n.modal("hide"))}),a.fail(function(){alert("Sorry, Can not process your request.")}),a.always(function(){})})}}function add_new_item4(e,t){if("-1"==t.val()){var n=$("#addCompany"),i=$("#new_company_name"),d=$("#responseMessage_addCompany"),a=$("#btnaddCompany");d.html(""),i.val(""),n.modal("show"),a.on("click",function(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/add_user_input_company",e.data={company_name:i.val(),action:"add"},e.beforeSend=function(){showAjaxLoader()};var a=e.init();a.done(function(e){hideAjaxLoader(),e.msg&&d.html(e.msg),e.insert_id&&(t.append($("<option>",{value:e.insert_id,text:i.val()})),$("#prev_company_id option[value="+e.insert_id+"]").attr("selected","selected"),n.modal("hide"))}),a.fail(function(){alert("Sorry, Can not process your request.")}),a.always(function(){})})}}function add_new_item5(e,t){if("-1"==t.val()){var n=$("#addDesignation"),i=$("#new_designation_name"),d=$("#responseMessage_addDesignation"),a=$("#btnaddDesignation");d.html(""),i.val(""),n.modal("show"),a.on("click",function(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/add_user_input_designation",e.data={designation_name:i.val(),action:"add"},e.beforeSend=function(){showAjaxLoader()};var a=e.init();a.done(function(e){hideAjaxLoader(),e.msg&&d.html(e.msg),e.insert_id&&(t.append($("<option>",{value:e.insert_id,text:i.val()})),$("#prev_designation_id option[value="+e.insert_id+"]").attr("selected","selected"),n.modal("hide"))}),a.fail(function(){alert("Sorry, Can not process your request.")}),a.always(function(){})})}}function get_user_suggestion(){$(".user-serach-dropdown-ajax").select2({placeholder:"Employee Name or ID",ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_user_suggestion",dataType:"json",delay:250,processResults:function(e){return{results:e}},cache:!0}})}$(domReady),$("body").on("click",".change_account_status",changeAccountStatus);