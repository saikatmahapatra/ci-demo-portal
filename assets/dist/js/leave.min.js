function renderLeaveBalDataTable(){leave_bal_table=$("#view-leave-bal-datatable").DataTable({iDisplayLength:50,processing:!0,serverSide:!0,order:[],ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/render_leave_bal_datatable"},columnDefs:[{targets:[-1],orderable:!1}]})}function manage_leave_req(a){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/update_leave_status",e.data={leave_id:$("#leave_id").val(),leave_req_id:$("#leave_req_id").val(),action_by_approver:$("#action_by_approver").val(),action_by_approver_id:$("#action_by_approver_id").val(),leave_status:$("#leave_action_status").val(),leave_comments:$("#leave_action_comment").val(),action:"update"},e.beforeSend=function(){showAjaxLoader()};var t=e.init();t.done(function(a){hideAjaxLoader(),a.msg&&($("#responseMessage_leaveActionModal").removeClass("alert alert-danger alert-success").addClass(a.css),$("#responseMessage_leaveActionModal").empty().html(a.msg)),1==a.updated&&($("#leaveActionModal").modal("hide"),window.location.reload(!0))}),t.fail(function(){alert("Sorry, Can not process your request.")}),t.always(function(){})}function renderLeaveBalanceDataTable(){leave_balance_datatable=$("#leave_balance_datatable").DataTable({iDisplayLength:100,processing:!0,serverSide:!0,order:[],ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/render_leave_balance_datatable"},columnDefs:[{targets:[-1],orderable:!1}]})}$(function(){"import_data"==ROUTER_METHOD&&renderLeaveBalanceDataTable(),"view_leave_balance"==ROUTER_METHOD&&renderLeaveBalDataTable(),$("#leave_from_date").datepicker({format:"dd-mm-yyyy",weekStart:1,autoclose:!0,startDate:"-3m",container:$("#leave_from_date").parent()}),$("#leave_to_date").datepicker({format:"dd-mm-yyyy",weekStart:1,autoclose:!0,startDate:"-3m",container:$("#leave_to_date").parent()}),$("[data-action-by]").on("click",function(a){a.preventDefault(),$("#leaveActionModal input[name='action_by_approver']").val($(this).attr("data-action-by")),$("#leaveActionModal input[name='action_by_approver_id']").val($(this).attr("data-action-by-userid")),$("#leaveActionModal").modal("show")}),$("#btnManageLeave").on("click",manage_leave_req),$("#user_dropdown").on("change",function(){var a=$(this).val(),e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_user_leave_balance",e.data={user_id:a,action:"ajax"},e.beforeSend=function(){showAjaxLoader()};var t=e.init();t.done(function(a){console.log(a);var e="#ci-form-leavebalance";null!=a.data?($(e+' input[name="id"]').val(a.data.id),$(e+' input[name="cl"]').val(a.data.cl),$(e+' input[name="sl"]').val(a.data.sl),$(e+' input[name="pl"]').val(a.data.pl),$(e+' input[name="ol"]').val(a.data.ol),$("#created_on").html(a.data.created_on),$("#updated_on").html(a.data.updated_on),$("#pl_updated_by_cron_on").html(a.data.pl_updated_by_cron_on),$("#cl_updated_by_cron_on").html(a.data.cl_updated_by_cron_on),$("#ol_updated_by_cron_on").html(a.data.ol_updated_by_cron_on)):($(e+' input[name="id"]').val(""),$(e+' input[name="cl"]').val(""),$(e+' input[name="sl"]').val(""),$(e+' input[name="pl"]').val(""),$(e+' input[name="ol"]').val(""),$("#created_on").html(""),$("#updated_on").html(""),$("#pl_updated_by_cron_on").html(""),$("#cl_updated_by_cron_on").html(""),$("#ol_updated_by_cron_on").html("")),hideAjaxLoader()}),t.fail(function(){alert("Sorry, Can not process your request.")}),t.always(function(){})}),$("#import_form").on("submit",function(a){if(a.preventDefault(),1==confirm("Are you sure you want import bulk data?\nAll employees leave balance will be updated as per this excel sheet data.")){new FormData(this);$.ajax({url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/import",method:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,beforeSend:function(){showAjaxLoader()},success:function(a){$("#userfile").val(""),hideAjaxLoader(),console.log(a),a=JSON.parse(a),$("#import_result_msg").empty().html('<div class="'+a.css+'">'+a.msg+"</div>"),leave_bal_table.ajax.reload()}})}})});