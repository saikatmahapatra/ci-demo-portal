<<<<<<< HEAD
var splitted_uri,selectedDate=[],month="",year="",taskFilledDates=[],currMonth="",currYear="";function get_timesheet_stat(){var t=new Ajax;t.type="POST",t.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/timesheet_stats",t.beforeSend=function(){showAjaxLoader()},t.data={via:"ajax",month:month,year:year};var e=t.init();e.done(function(t){hideAjaxLoader(),"undefined"!=t.data.stat_data.total_days&&$("#total_days").html(t.data.stat_data.total_days),"undefined"!=t.data.stat_data.total_hrs&&$("#total_hrs").html(t.data.stat_data.total_hrs),"undefined"!=t.data.stat_data.avg_hrs&&$("#average_worked_hrs").html(t.data.stat_data.avg_hrs),$.each(t.data.data_rows,function(t,e){$(".day").each(function(){var t=$(this).text();e.timesheet_day=Number(e.timesheet_day).toString(),t==e.timesheet_day&&$(this).addClass("filled")})})}),e.fail(function(){alert("Failed")}),e.always(function(){})}function renderDataTable(){this.table=$("#timesheet-datatable").DataTable({iDisplayLength:25,processing:!0,serverSide:!0,order:[],ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/render_datatable",data:{year:year,month:month}},columnDefs:[{targets:[-1],orderable:!1}],initComplete:function(){$('[data-toggle="tooltip"]').tooltip()}})}function getData(){var t=new Ajax;t.type="POST",t.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/timesheet_stats",t.beforeSend=function(){showAjaxLoader()},t.data={via:"ajax",month:currMonth,year:currYear};var e=t.init();e.done(function(t){hideAjaxLoader(),r=t.data.data_rows[0].timesheet_date,null!=r&&(taskFilledDates=r.split(","),$.each(taskFilledDates,function(t,e){console.log(t+": "+e);var a=e.split("-"),n=Number(a[2]).toString();$("#dp_timesheet td:not(.old):not(.new):not(.cw):contains("+n+")").filter(function(t){return $(this).text()==n?$(this).addClass("filled"):""})}))}),e.fail(function(){alert("Failed")}),e.always(function(){})}getData(),$("#dp_timesheet").datepicker({multidate:!0,format:"yyyy-mm-dd",daysOfWeekHighlighted:"0",calendarWeeks:!0,todayHighlight:!0,todayBtn:!0,clearBtn:!0,beforeShowDay:function(t){},beforeShowMonth:function(t){},beforeShowYear:function(t){},toggleActive:!0}).on("changeDate",function(t){var e=$(this).datepicker("getFormattedDate");$('input[name="selected_date"]').val(e)}).on("changeMonth",function(t){currMonth=new Date(t.date).getMonth()+1,currYear=String(t.date).split(" ")[3],getData()}).on("show",function(t){console.log("--- on show----",t),getData()}),$(function(){if("index"==ROUTER_METHOD){var t=$('input[name="selected_date"]').val();t&&$("#dp_timesheet").datepicker("setDates",t.split(",")),renderDataTable()}"report"==ROUTER_METHOD&&($(".report-datepicker").datepicker({format:"dd-mm-yyyy",weekStart:1,autoclose:!0}),$(".multi_select_tag").select2({allowClear:!0,width:"100%"}),$("#reset_timesheet_form").on("click",function(t){t.preventDefault(),$("#timesheet-search-form .form-control").val("")}),$(".select2-control-user").select2({ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_user_dropdown_searchable",dataType:"json",delay:250,data:function(t){return{q:t.term,page:t.page}},cache:!0},placeholder:"Search",minimumInputLength:3}),$(".select2-control-project").select2({ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_project_dropdown_searchable",dataType:"json",delay:250,data:function(t){return{q:t.term,page:t.page}},cache:!0},placeholder:"Search",minimumInputLength:3}))});
=======
var splitted_uri,selectedDate=[],month="",year="";function get_timesheet_stat(){var e=new Ajax;e.type="POST",e.url=SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/timesheet_stats",e.beforeSend=function(){showAjaxLoader()},e.data={via:"ajax",month:month,year:year};var t=e.init();t.done(function(e){hideAjaxLoader(),"undefined"!=e.data.stat_data.total_days&&$("#total_days").html(e.data.stat_data.total_days),"undefined"!=e.data.stat_data.total_hrs&&$("#total_hrs").html(e.data.stat_data.total_hrs),"undefined"!=e.data.stat_data.avg_hrs&&$("#average_worked_hrs").html(e.data.stat_data.avg_hrs),$.each(e.data.data_rows,function(e,t){$(".day").each(function(){var e=$(this).text();t.timesheet_day=Number(t.timesheet_day).toString(),e==t.timesheet_day&&$(this).addClass("filled")})})}),t.fail(function(){alert("Failed")}),t.always(function(){})}function renderDataTable(){this.table=$("#timesheet-datatable").DataTable({iDisplayLength:25,processing:!0,serverSide:!0,order:[],ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/render_datatable",data:{year:year,month:month}},columnDefs:[{targets:[-1],orderable:!1}],initComplete:function(){$('[data-toggle="tooltip"]').tooltip()}})}$(function(){if("index"==ROUTER_METHOD){var e=$('input[name="selected_date"]').val();if(e){var t=e.split(",");selectedDate=t,$("#display_selected_date").html(selectedDate.join()),0<t.length&&$.each(t,function(e,t){$(".day").each(function(){$(this).text()==t&&$(this).addClass("selected")})})}if(null!=(splitted_uri=window.location.href.split("timesheet/index/"))[1]){var a=splitted_uri[1].split("/");a&&(month=a[1],year=a[0])}get_timesheet_stat(),renderDataTable();var d=$('input[name="today_date"]').val(),l=$('input[name="current_month"]').val(),s=$('input[name="month_url"]').val();$("#timesheet_calendar td.day").each(function(){var e=$(this).text();0<e.trim().length&&l==s&&parseInt(e)>parseInt(d)&&$(this).attr("data-calday","disabled_day")})}"report"==ROUTER_METHOD&&($(".report-datepicker").datepicker({format:"dd-mm-yyyy",weekStart:1,autoclose:!0}),$(".multi_select_tag").select2({allowClear:!0,width:"100%"}),$("#reset_timesheet_form").on("click",function(e){e.preventDefault(),$("#timesheet-search-form .form-control").val("")}),$(".select2-control-user").select2({ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_user_dropdown_searchable",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},cache:!0},placeholder:"Search",minimumInputLength:3}),$(".select2-control-project").select2({ajax:{url:SITE_URL+ROUTER_DIRECTORY+ROUTER_CLASS+"/get_project_dropdown_searchable",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},cache:!0},placeholder:"Search",minimumInputLength:3}))}),$("body").on("click","td[data-calday='allowed_day']",function(e){var t=$(this).text();0<t.trim().length&&($(this).hasClass("selected")?($(this).removeClass("selected"),selectedDate.splice($.inArray(t,selectedDate),1)):($(this).addClass("selected"),selectedDate.push(t))),$("#display_selected_date").html(selectedDate.join()),$('input[name="selected_date"]').val(selectedDate.join())}),$("#clear_selected_days").on("click",function(e){e.preventDefault(),selectedDate=[],$('input[name="selected_date"]').val(""),$(".day").removeClass("selected")});
>>>>>>> parent of ef1dbf6... bs dp added
